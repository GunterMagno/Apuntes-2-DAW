<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <title>Contenedores Docker - Wiki 2º DAW</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo"><i class="fas fa-book-open"></i><h1>Wiki 2º DAW</h1></div>
            <a href="./index.html" class="back-button"><i class="fas fa-arrow-left"></i> Volver a Docker</a>
        </div>
    </nav>

    <div class="content-with-sidebar">
        <aside class="sidebar">
            <h3 class="sidebar-title"><i class="fab fa-docker"></i> Contenedores</h3>
            <ul class="sidebar-nav">
                <li><a href="#ejecutar" class="active">Ejecutar Contenedores</a></li>
                <li><a href="#gestionar">Gestionar Contenedores</a></li>
                <li><a href="#logs">Logs y Debugging</a></li>
                <li><a href="#puertos">Mapeo de Puertos</a></li>
                <li><a href="#variables">Variables de Entorno</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <div class="detail-header">
                <div class="detail-icon" style="color: var(--docker-color);"><i class="fab fa-docker"></i></div>
                <h1 class="detail-title">3. Contenedores</h1>
                <p class="detail-subtitle">Ejecutar y gestionar aplicaciones</p>
            </div>

            <div class="content-section" id="ejecutar">
                <h2><i class="fas fa-play"></i> Ejecutar Contenedores</h2>
                <div class="code-block"><pre># Ejecutar contenedor básico
docker run nginx

# Ejecutar en segundo plano (-d = detached)
docker run -d nginx

# Con nombre personalizado
docker run -d --name mi-nginx nginx

# Eliminar automáticamente al parar (--rm)
docker run --rm nginx

# Modo interactivo (-it)
docker run -it ubuntu bash</pre></div>
            </div>

            <div class="content-section" id="gestionar">
                <h2><i class="fas fa-cogs"></i> Gestionar Contenedores</h2>
                <div class="code-block"><pre># Ver contenedores en ejecución
docker ps

# Ver todos (incluso parados)
docker ps -a

# Parar contenedor
docker stop mi-nginx

# Iniciar contenedor parado
docker start mi-nginx

# Reiniciar contenedor
docker restart mi-nginx

# Eliminar contenedor
docker rm mi-nginx

# Forzar eliminación (si está corriendo)
docker rm -f mi-nginx

# Eliminar todos los contenedores parados
docker container prune</pre></div>
            </div>

            <div class="content-section" id="logs">
                <h2><i class="fas fa-file-alt"></i> Logs y Debugging</h2>
                <div class="code-block"><pre># Ver logs
docker logs mi-nginx

# Seguir logs en tiempo real (-f = follow)
docker logs -f mi-nginx

# Ver últimas 100 líneas
docker logs --tail 100 mi-nginx

# Ejecutar comando dentro del contenedor
docker exec mi-nginx ls /app

# Abrir terminal interactiva
docker exec -it mi-nginx bash

# Ver estadísticas de recursos
docker stats mi-nginx

# Inspeccionar contenedor (configuración completa)
docker inspect mi-nginx</pre></div>
            </div>

            <div class="content-section" id="puertos">
                <h2><i class="fas fa-network-wired"></i> Mapeo de Puertos</h2>
                <p>Para acceder a la aplicación del contenedor desde tu máquina, debes mapear puertos.</p>
                <div class="code-block"><pre># Mapear puerto 8080 del host al 80 del contenedor
docker run -d -p 8080:80 nginx
# Ahora accedes en: http://localhost:8080

# Múltiples puertos
docker run -d -p 3000:3000 -p 5000:5000 mi-app

# Puerto aleatorio del host
docker run -d -p 80 nginx</pre></div>
                <div class="info-box">
                    <p><strong>Formato:</strong> <code>-p PUERTO_HOST:PUERTO_CONTENEDOR</code></p>
                </div>
            </div>

            <div class="content-section" id="variables">
                <h2><i class="fas fa-key"></i> Variables de Entorno</h2>
                <div class="code-block"><pre># Pasar variable de entorno
docker run -e NODE_ENV=production mi-app

# Múltiples variables
docker run -e DB_HOST=localhost -e DB_PORT=5432 mi-app

# Desde archivo
docker run --env-file .env mi-app</pre></div>
                <p><strong>Ejemplo .env:</strong></p>
                <div class="code-block"><pre>NODE_ENV=production
DB_HOST=localhost
DB_PORT=5432</pre></div>
            </div>
        </main>
    </div>

    <script src="../../js/main.js"></script>
    <script>document.addEventListener('DOMContentLoaded',function(){const sections=document.querySelectorAll('.content-section');const navLinks=document.querySelectorAll('.sidebar-nav a');function changeActiveLink(){let currentSection='';sections.forEach(section=>{const sectionTop=section.offsetTop;if(window.pageYOffset>=sectionTop-100){currentSection=section.getAttribute('id');}});navLinks.forEach(link=>{link.classList.remove('active');if(link.getAttribute('href')==='#'+currentSection){link.classList.add('active');}});}window.addEventListener('scroll',changeActiveLink);});</script>
</body>
</html>
