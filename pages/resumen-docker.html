<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumen Docker - Wiki 2º DAW</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-md) 0;
            background-color: var(--bg-card);
            border-radius: var(--radius-md);
            overflow: hidden;
        }
        .summary-table thead {
            background-color: var(--accent-primary);
            color: var(--bg-primary);
        }
        .summary-table th, .summary-table td {
            padding: var(--spacing-sm) var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--bg-tertiary);
        }
        .summary-table th {
            font-weight: 700;
            font-size: 1.1rem;
        }
        .summary-table td:first-child {
            font-family: 'Courier New', monospace;
            color: var(--docker-color);
            font-weight: 600;
        }
        .summary-table tr:hover {
            background-color: var(--bg-card-hover);
        }
        .summary-table code {
            background-color: var(--bg-primary);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <h1>Wiki 2º DAW</h1>
            </div>
            <a href="../index.html" class="back-button">
                <i class="fas fa-arrow-left"></i> Volver al inicio
            </a>
        </div>
    </nav>

    <div class="detail-page">
        <div class="detail-header">
            <div class="detail-icon" style="color: var(--docker-color);">
                <i class="fab fa-docker"></i>
            </div>
            <h1 class="detail-title">Resumen Rápido: Docker</h1>
            <p class="detail-subtitle">Referencia rápida de comandos, Dockerfile y Docker Compose</p>
        </div>

        <!-- Comandos básicos de imágenes -->
        <div class="content-section">
            <h2><i class="fas fa-layer-group"></i> Comandos de imágenes</h2>
            <p>Las imágenes son plantillas de solo lectura para crear contenedores.</p>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker pull imagen</td>
                        <td>Descarga imagen de Docker Hub</td>
                        <td>docker pull nginx:latest</td>
                    </tr>
                    <tr>
                        <td>docker images</td>
                        <td>Lista todas las imágenes locales</td>
                        <td>docker images</td>
                    </tr>
                    <tr>
                        <td>docker build -t nombre .</td>
                        <td>Construye imagen desde Dockerfile</td>
                        <td>docker build -t mi-app:1.0 .</td>
                    </tr>
                    <tr>
                        <td>docker rmi imagen</td>
                        <td>Elimina una imagen</td>
                        <td>docker rmi nginx:latest</td>
                    </tr>
                    <tr>
                        <td>docker tag imagen nueva</td>
                        <td>Crea tag de una imagen</td>
                        <td>docker tag mi-app:1.0 mi-app:latest</td>
                    </tr>
                    <tr>
                        <td>docker push imagen</td>
                        <td>Sube imagen a Docker Hub</td>
                        <td>docker push usuario/mi-app:1.0</td>
                    </tr>
                    <tr>
                        <td>docker history imagen</td>
                        <td>Muestra historial de capas</td>
                        <td>docker history nginx</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Comandos básicos de contenedores -->
        <div class="content-section">
            <h2><i class="fas fa-box"></i> Comandos de contenedores</h2>
            <p>Los contenedores son instancias ejecutables de imágenes.</p>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker run imagen</td>
                        <td>Crea y ejecuta un contenedor</td>
                        <td>docker run nginx</td>
                    </tr>
                    <tr>
                        <td>docker run -d imagen</td>
                        <td>Ejecuta en segundo plano (detached)</td>
                        <td>docker run -d nginx</td>
                    </tr>
                    <tr>
                        <td>docker run -p host:container</td>
                        <td>Mapea puertos</td>
                        <td>docker run -p 8080:80 nginx</td>
                    </tr>
                    <tr>
                        <td>docker run --name nombre</td>
                        <td>Asigna nombre al contenedor</td>
                        <td>docker run --name web nginx</td>
                    </tr>
                    <tr>
                        <td>docker run -v host:container</td>
                        <td>Monta volumen</td>
                        <td>docker run -v /data:/app/data nginx</td>
                    </tr>
                    <tr>
                        <td>docker run -e VAR=value</td>
                        <td>Establece variable de entorno</td>
                        <td>docker run -e PORT=3000 node-app</td>
                    </tr>
                    <tr>
                        <td>docker run --rm</td>
                        <td>Elimina contenedor al parar</td>
                        <td>docker run --rm nginx</td>
                    </tr>
                    <tr>
                        <td>docker ps</td>
                        <td>Lista contenedores en ejecución</td>
                        <td>docker ps</td>
                    </tr>
                    <tr>
                        <td>docker ps -a</td>
                        <td>Lista todos los contenedores</td>
                        <td>docker ps -a</td>
                    </tr>
                    <tr>
                        <td>docker start contenedor</td>
                        <td>Inicia contenedor parado</td>
                        <td>docker start web</td>
                    </tr>
                    <tr>
                        <td>docker stop contenedor</td>
                        <td>Para contenedor en ejecución</td>
                        <td>docker stop web</td>
                    </tr>
                    <tr>
                        <td>docker restart contenedor</td>
                        <td>Reinicia contenedor</td>
                        <td>docker restart web</td>
                    </tr>
                    <tr>
                        <td>docker rm contenedor</td>
                        <td>Elimina contenedor parado</td>
                        <td>docker rm web</td>
                    </tr>
                    <tr>
                        <td>docker rm -f contenedor</td>
                        <td>Fuerza eliminación (incluso si está corriendo)</td>
                        <td>docker rm -f web</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Comandos de inspección y logs -->
        <div class="content-section">
            <h2><i class="fas fa-search"></i> Inspección y debugging</h2>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker logs contenedor</td>
                        <td>Muestra logs del contenedor</td>
                        <td>docker logs web</td>
                    </tr>
                    <tr>
                        <td>docker logs -f contenedor</td>
                        <td>Muestra logs en tiempo real (follow)</td>
                        <td>docker logs -f web</td>
                    </tr>
                    <tr>
                        <td>docker inspect contenedor</td>
                        <td>Muestra info detallada en JSON</td>
                        <td>docker inspect web</td>
                    </tr>
                    <tr>
                        <td>docker exec -it contenedor comando</td>
                        <td>Ejecuta comando en contenedor activo</td>
                        <td>docker exec -it web bash</td>
                    </tr>
                    <tr>
                        <td>docker stats</td>
                        <td>Muestra uso de recursos en tiempo real</td>
                        <td>docker stats</td>
                    </tr>
                    <tr>
                        <td>docker top contenedor</td>
                        <td>Muestra procesos del contenedor</td>
                        <td>docker top web</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Dockerfile - Instrucciones principales -->
        <div class="content-section">
            <h2><i class="fas fa-file-code"></i> Dockerfile - Instrucciones principales</h2>
            <p>El Dockerfile define cómo construir una imagen.</p>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Instrucción</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>FROM</td>
                        <td>Define imagen base</td>
                        <td>FROM node:18-alpine</td>
                    </tr>
                    <tr>
                        <td>WORKDIR</td>
                        <td>Establece directorio de trabajo</td>
                        <td>WORKDIR /app</td>
                    </tr>
                    <tr>
                        <td>COPY</td>
                        <td>Copia archivos del host a imagen</td>
                        <td>COPY package.json .</td>
                    </tr>
                    <tr>
                        <td>ADD</td>
                        <td>Como COPY pero puede descargar URLs</td>
                        <td>ADD https://example.com/file.tar.gz /app/</td>
                    </tr>
                    <tr>
                        <td>RUN</td>
                        <td>Ejecuta comandos al construir imagen</td>
                        <td>RUN npm install</td>
                    </tr>
                    <tr>
                        <td>CMD</td>
                        <td>Comando por defecto al iniciar contenedor</td>
                        <td>CMD ["node", "index.js"]</td>
                    </tr>
                    <tr>
                        <td>ENTRYPOINT</td>
                        <td>Comando que siempre se ejecuta</td>
                        <td>ENTRYPOINT ["docker-entrypoint.sh"]</td>
                    </tr>
                    <tr>
                        <td>EXPOSE</td>
                        <td>Documenta qué puerto usa la app</td>
                        <td>EXPOSE 3000</td>
                    </tr>
                    <tr>
                        <td>ENV</td>
                        <td>Define variable de entorno</td>
                        <td>ENV NODE_ENV=production</td>
                    </tr>
                    <tr>
                        <td>ARG</td>
                        <td>Variable solo para build time</td>
                        <td>ARG VERSION=1.0</td>
                    </tr>
                    <tr>
                        <td>VOLUME</td>
                        <td>Crea punto de montaje para volumen</td>
                        <td>VOLUME /data</td>
                    </tr>
                    <tr>
                        <td>USER</td>
                        <td>Usuario que ejecuta comandos</td>
                        <td>USER node</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Volúmenes -->
        <div class="content-section">
            <h2><i class="fas fa-hdd"></i> Volúmenes - Persistencia de datos</h2>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker volume create</td>
                        <td>Crea un volumen</td>
                        <td>docker volume create mi-volumen</td>
                    </tr>
                    <tr>
                        <td>docker volume ls</td>
                        <td>Lista todos los volúmenes</td>
                        <td>docker volume ls</td>
                    </tr>
                    <tr>
                        <td>docker volume inspect</td>
                        <td>Muestra info del volumen</td>
                        <td>docker volume inspect mi-volumen</td>
                    </tr>
                    <tr>
                        <td>docker volume rm</td>
                        <td>Elimina un volumen</td>
                        <td>docker volume rm mi-volumen</td>
                    </tr>
                    <tr>
                        <td>-v volumen:path</td>
                        <td>Monta volumen nombrado</td>
                        <td>docker run -v mi-volumen:/data nginx</td>
                    </tr>
                    <tr>
                        <td>-v /host/path:/container/path</td>
                        <td>Bind mount (monta carpeta del host)</td>
                        <td>docker run -v $(pwd):/app node</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Redes -->
        <div class="content-section">
            <h2><i class="fas fa-network-wired"></i> Redes - Comunicación entre contenedores</h2>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker network create</td>
                        <td>Crea una red</td>
                        <td>docker network create mi-red</td>
                    </tr>
                    <tr>
                        <td>docker network ls</td>
                        <td>Lista todas las redes</td>
                        <td>docker network ls</td>
                    </tr>
                    <tr>
                        <td>docker network inspect</td>
                        <td>Muestra info de la red</td>
                        <td>docker network inspect mi-red</td>
                    </tr>
                    <tr>
                        <td>docker network connect</td>
                        <td>Conecta contenedor a red</td>
                        <td>docker network connect mi-red web</td>
                    </tr>
                    <tr>
                        <td>docker network disconnect</td>
                        <td>Desconecta contenedor de red</td>
                        <td>docker network disconnect mi-red web</td>
                    </tr>
                    <tr>
                        <td>--network nombre</td>
                        <td>Conecta contenedor a red al crearlo</td>
                        <td>docker run --network mi-red nginx</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Docker Compose -->
        <div class="content-section">
            <h2><i class="fas fa-cubes"></i> Docker Compose - Multi-contenedor</h2>
            <p>Docker Compose permite definir y ejecutar aplicaciones multi-contenedor.</p>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué hace</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker compose up</td>
                        <td>Inicia todos los servicios</td>
                        <td>docker compose up</td>
                    </tr>
                    <tr>
                        <td>docker compose up -d</td>
                        <td>Inicia en segundo plano</td>
                        <td>docker compose up -d</td>
                    </tr>
                    <tr>
                        <td>docker compose down</td>
                        <td>Para y elimina contenedores, redes</td>
                        <td>docker compose down</td>
                    </tr>
                    <tr>
                        <td>docker compose ps</td>
                        <td>Lista servicios en ejecución</td>
                        <td>docker compose ps</td>
                    </tr>
                    <tr>
                        <td>docker compose logs</td>
                        <td>Muestra logs de todos los servicios</td>
                        <td>docker compose logs -f</td>
                    </tr>
                    <tr>
                        <td>docker compose exec servicio cmd</td>
                        <td>Ejecuta comando en servicio</td>
                        <td>docker compose exec web bash</td>
                    </tr>
                    <tr>
                        <td>docker compose build</td>
                        <td>Construye/reconstruye servicios</td>
                        <td>docker compose build</td>
                    </tr>
                    <tr>
                        <td>docker compose restart</td>
                        <td>Reinicia servicios</td>
                        <td>docker compose restart web</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- docker-compose.yml - Estructura -->
        <div class="content-section">
            <h2><i class="fas fa-file-alt"></i> docker-compose.yml - Claves principales</h2>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Clave</th>
                        <th>Qué define</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>version</td>
                        <td>Versión de Compose file</td>
                        <td>version: '3.8'</td>
                    </tr>
                    <tr>
                        <td>services</td>
                        <td>Contenedores de la aplicación</td>
                        <td>services:<br>&nbsp;&nbsp;web:<br>&nbsp;&nbsp;db:</td>
                    </tr>
                    <tr>
                        <td>image</td>
                        <td>Imagen a usar</td>
                        <td>image: nginx:latest</td>
                    </tr>
                    <tr>
                        <td>build</td>
                        <td>Ruta al Dockerfile</td>
                        <td>build: ./app</td>
                    </tr>
                    <tr>
                        <td>ports</td>
                        <td>Mapeo de puertos</td>
                        <td>ports:<br>&nbsp;&nbsp;- "8080:80"</td>
                    </tr>
                    <tr>
                        <td>volumes</td>
                        <td>Montaje de volúmenes</td>
                        <td>volumes:<br>&nbsp;&nbsp;- ./data:/app/data</td>
                    </tr>
                    <tr>
                        <td>environment</td>
                        <td>Variables de entorno</td>
                        <td>environment:<br>&nbsp;&nbsp;- NODE_ENV=production</td>
                    </tr>
                    <tr>
                        <td>depends_on</td>
                        <td>Dependencias de servicios</td>
                        <td>depends_on:<br>&nbsp;&nbsp;- db</td>
                    </tr>
                    <tr>
                        <td>networks</td>
                        <td>Redes personalizadas</td>
                        <td>networks:<br>&nbsp;&nbsp;- frontend</td>
                    </tr>
                    <tr>
                        <td>restart</td>
                        <td>Política de reinicio</td>
                        <td>restart: always</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Comandos de limpieza -->
        <div class="content-section">
            <h2><i class="fas fa-broom"></i> Comandos de limpieza</h2>
            
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Comando</th>
                        <th>Qué limpia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>docker system prune</td>
                        <td>Elimina contenedores parados, redes no usadas, imágenes colgantes</td>
                    </tr>
                    <tr>
                        <td>docker system prune -a</td>
                        <td>Elimina también imágenes no usadas</td>
                    </tr>
                    <tr>
                        <td>docker container prune</td>
                        <td>Elimina contenedores parados</td>
                    </tr>
                    <tr>
                        <td>docker image prune</td>
                        <td>Elimina imágenes sin tag</td>
                    </tr>
                    <tr>
                        <td>docker volume prune</td>
                        <td>Elimina volúmenes no usados</td>
                    </tr>
                    <tr>
                        <td>docker network prune</td>
                        <td>Elimina redes no usadas</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="content-section">
            <div class="info-box">
                <h4><i class="fas fa-lightbulb"></i> Consejo importante</h4>
                <p><strong>Docker no es una VM</strong>: los contenedores comparten el kernel del host, son más ligeros y rápidos que máquinas virtuales.</p>
                <p><strong>Contenedores son efímeros</strong>: diseña tus apps asumiendo que el contenedor puede eliminarse en cualquier momento. Usa volúmenes para datos persistentes.</p>
                <p><strong>Multi-stage builds</strong>: usa múltiples FROM en tu Dockerfile para crear imágenes más pequeñas (ej: compilar en una imagen, ejecutar en otra).</p>
                <p><strong>.dockerignore</strong>: crea este archivo para excluir archivos del contexto de build (como .git, node_modules).</p>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Wiki Personal 2º DAW</p>
        </div>
    </footer>

    <script src="../js/main.js"></script>
</body>
</html>
