<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js - Wiki 2º DAW</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <h1>Wiki 2º DAW</h1>
            </div>
            <a href="../index.html" class="back-button">
                <i class="fas fa-arrow-left"></i> Volver al inicio
            </a>
        </div>
    </nav>

    <div class="detail-page">
        <div class="detail-header">
            <div class="detail-icon" style="color: var(--node-color);">
                <i class="fab fa-node-js"></i>
            </div>
            <h1 class="detail-title">Node.js</h1>
            <p class="detail-subtitle">Entorno de ejecución JavaScript del lado del servidor</p>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-info-circle"></i> ¿Qué es Node.js?</h2>
            <p>
                Node.js es un entorno de ejecución JavaScript construido sobre el motor V8 de Chrome. Permite ejecutar 
                JavaScript en el servidor, no solo en el navegador. Utiliza un modelo de E/S sin bloqueo y orientado 
                a eventos, lo que lo hace ligero y eficiente para aplicaciones en tiempo real.
            </p>
            
            <div class="info-box">
                <h4><i class="fas fa-lightbulb"></i> Características principales</h4>
                <ul>
                    <li><strong>Event-driven:</strong> Programación basada en eventos asíncronos</li>
                    <li><strong>Non-blocking I/O:</strong> Operaciones sin bloqueo, alta concurrencia</li>
                    <li><strong>NPM:</strong> Gestor de paquetes con millones de módulos</li>
                    <li><strong>Single-threaded:</strong> Un solo hilo con Event Loop</li>
                    <li><strong>Multiplataforma:</strong> Windows, Linux, macOS</li>
                    <li><strong>Escalable:</strong> Ideal para aplicaciones en tiempo real</li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-cogs"></i> ¿Cómo funciona Node.js?</h2>
            
            <h3>Event Loop</h3>
            <p>
                Node.js utiliza un Event Loop para manejar operaciones asíncronas. Cuando se realiza una operación 
                que toma tiempo (leer archivo, consulta BD), Node.js no espera y continúa ejecutando código. 
                Cuando la operación termina, se ejecuta un callback.
            </p>

            <div class="code-block">
                <pre>
// Ejemplo de operación asíncrona
console.log('1. Inicio');

setTimeout(() => {
  console.log('2. Callback después de 2 segundos');
}, 2000);

console.log('3. Fin');

// Salida:
// 1. Inicio
// 3. Fin
// 2. Callback después de 2 segundos
                </pre>
            </div>

            <h3>Módulos en Node.js</h3>
            <p>Node.js usa el sistema de módulos CommonJS (require/module.exports) y también soporta ES6 modules (import/export).</p>
            
            <div class="code-block">
                <pre>
// CommonJS - Exportar
// matematicas.js
function sumar(a, b) {
  return a + b;
}

function restar(a, b) {
  return a - b;
}

module.exports = {
  sumar,
  restar
};

// CommonJS - Importar
// app.js
const { sumar, restar } = require('./matematicas');
console.log(sumar(5, 3));  // 8
                </pre>
            </div>

            <div class="code-block">
                <pre>
// ES6 Modules - Exportar
// matematicas.mjs
export function sumar(a, b) {
  return a + b;
}

export function restar(a, b) {
  return a - b;
}

// ES6 Modules - Importar
// app.mjs
import { sumar, restar } from './matematicas.mjs';
console.log(sumar(5, 3));  // 8
                </pre>
            </div>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-code"></i> Ejemplos prácticos</h2>
            
            <h3>1. Servidor HTTP básico</h3>
            <div class="code-block">
                <pre>
// server.js
const http = require('http');

const hostname = 'localhost';
const port = 3000;

const server = http.createServer((req, res) => {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('¡Hola desde Node.js!');
});

server.listen(port, hostname, () => {
  console.log(`Servidor ejecutándose en http://${hostname}:${port}/`);
});

// Ejecutar: node server.js
                </pre>
            </div>

            <h3>2. Lectura y escritura de archivos</h3>
            <div class="code-block">
                <pre>
const fs = require('fs');

// Lectura síncrona (bloquea el código)
const dataSinc = fs.readFileSync('archivo.txt', 'utf8');
console.log(dataSinc);

// Lectura asíncrona (no bloquea)
fs.readFile('archivo.txt', 'utf8', (err, data) => {
  if (err) {
    console.error('Error al leer:', err);
    return;
  }
  console.log(data);
});

// Escritura de archivo
const contenido = 'Hola desde Node.js';
fs.writeFile('nuevo.txt', contenido, (err) => {
  if (err) {
    console.error('Error al escribir:', err);
    return;
  }
  console.log('Archivo creado correctamente');
});

// Promises (fs.promises)
const fsPromises = require('fs').promises;

async function leerArchivo() {
  try {
    const data = await fsPromises.readFile('archivo.txt', 'utf8');
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}

leerArchivo();
                </pre>
            </div>

            <h3>3. Trabajar con rutas y archivos</h3>
            <div class="code-block">
                <pre>
const path = require('path');

// Unir rutas
const rutaCompleta = path.join(__dirname, 'carpeta', 'archivo.txt');
console.log(rutaCompleta);

// Nombre del archivo
const nombreArchivo = path.basename('/carpeta/archivo.txt');
console.log(nombreArchivo);  // archivo.txt

// Directorio
const directorio = path.dirname('/carpeta/archivo.txt');
console.log(directorio);  // /carpeta

// Extensión
const extension = path.extname('archivo.txt');
console.log(extension);  // .txt

// __dirname: directorio actual del archivo
// __filename: ruta completa del archivo actual
console.log('Directorio:', __dirname);
console.log('Archivo:', __filename);
                </pre>
            </div>

            <h3>4. Trabajar con eventos (EventEmitter)</h3>
            <div class="code-block">
                <pre>
const EventEmitter = require('events');

class MiEmisor extends EventEmitter {}

const miEmisor = new MiEmisor();

// Escuchar eventos
miEmisor.on('saludo', (nombre) => {
  console.log(`¡Hola ${nombre}!`);
});

miEmisor.on('saludo', () => {
  console.log('Evento saludo recibido');
});

// Emitir eventos
miEmisor.emit('saludo', 'Juan');

// Evento que se ejecuta solo una vez
miEmisor.once('despedida', () => {
  console.log('Adiós');
});

miEmisor.emit('despedida');
miEmisor.emit('despedida');  // No se ejecuta
                </pre>
            </div>

            <h3>5. Trabajo con Streams</h3>
            <div class="code-block">
                <pre>
const fs = require('fs');

// Readable stream (lectura)
const readStream = fs.createReadStream('archivo-grande.txt', 'utf8');

readStream.on('data', (chunk) => {
  console.log('Nuevo chunk:', chunk);
});

readStream.on('end', () => {
  console.log('Lectura completada');
});

readStream.on('error', (err) => {
  console.error('Error:', err);
});

// Writable stream (escritura)
const writeStream = fs.createWriteStream('salida.txt');

writeStream.write('Primera línea\n');
writeStream.write('Segunda línea\n');
writeStream.end('Última línea\n');

// Pipe (tubería)
const readStream2 = fs.createReadStream('input.txt');
const writeStream2 = fs.createWriteStream('output.txt');

readStream2.pipe(writeStream2);
                </pre>
            </div>

            <h3>6. Variables de entorno</h3>
            <div class="code-block">
                <pre>
// Acceder a variables de entorno
const puerto = process.env.PORT || 3000;
const modo = process.env.NODE_ENV || 'development';

console.log(`Puerto: ${puerto}`);
console.log(`Modo: ${modo}`);

// Archivo .env (con dotenv)
// npm install dotenv

// .env
// PORT=8080
// DB_HOST=localhost
// DB_USER=admin

// app.js
require('dotenv').config();

const dbHost = process.env.DB_HOST;
const dbUser = process.env.DB_USER;

console.log(`Conectando a ${dbHost} como ${dbUser}`);
                </pre>
            </div>

            <h3>7. package.json - Scripts y dependencias</h3>
            <div class="code-block">
                <pre>
{
  "name": "mi-app-node",
  "version": "1.0.0",
  "description": "Aplicación Node.js",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "jest"
  },
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "^7.0.0",
    "dotenv": "^16.0.3"
  },
  "devDependencies": {
    "nodemon": "^2.0.22",
    "jest": "^29.5.0"
  },
  "keywords": ["node", "backend"],
  "author": "Tu Nombre",
  "license": "MIT"
}
                </pre>
            </div>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-terminal"></i> Comandos Node.js y NPM</h2>
            
            <div class="command-item">
                <code>node --version</code>
                <span>Muestra la versión de Node.js instalada</span>
            </div>

            <div class="command-item">
                <code>npm --version</code>
                <span>Muestra la versión de npm instalada</span>
            </div>

            <div class="command-item">
                <code>node app.js</code>
                <span>Ejecuta un archivo JavaScript con Node</span>
            </div>

            <div class="command-item">
                <code>npm init</code>
                <span>Inicializa un nuevo proyecto Node (crea package.json)</span>
            </div>

            <div class="command-item">
                <code>npm init -y</code>
                <span>Inicializa proyecto con configuración por defecto</span>
            </div>

            <div class="command-item">
                <code>npm install paquete</code>
                <span>Instala un paquete como dependencia del proyecto</span>
            </div>

            <div class="command-item">
                <code>npm install paquete -D</code>
                <span>Instala como dependencia de desarrollo (devDependency)</span>
            </div>

            <div class="command-item">
                <code>npm install -g paquete</code>
                <span>Instala un paquete globalmente en el sistema</span>
            </div>

            <div class="command-item">
                <code>npm install</code>
                <span>Instala todas las dependencias del package.json</span>
            </div>

            <div class="command-item">
                <code>npm uninstall paquete</code>
                <span>Desinstala un paquete</span>
            </div>

            <div class="command-item">
                <code>npm update</code>
                <span>Actualiza todos los paquetes a sus últimas versiones</span>
            </div>

            <div class="command-item">
                <code>npm start</code>
                <span>Ejecuta el script "start" definido en package.json</span>
            </div>

            <div class="command-item">
                <code>npm run dev</code>
                <span>Ejecuta el script personalizado "dev"</span>
            </div>

            <div class="command-item">
                <code>npm list</code>
                <span>Lista todos los paquetes instalados</span>
            </div>

            <div class="command-item">
                <code>npm outdated</code>
                <span>Muestra paquetes con versiones desactualizadas</span>
            </div>

            <div class="command-item">
                <code>npx comando</code>
                <span>Ejecuta un paquete sin instalarlo globalmente</span>
            </div>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-puzzle-piece"></i> Paquetes NPM esenciales</h2>
            <ul>
                <li><strong>express:</strong> Framework web minimalista y flexible</li>
                <li><strong>nodemon:</strong> Reinicia automáticamente la aplicación en desarrollo</li>
                <li><strong>dotenv:</strong> Carga variables de entorno desde archivo .env</li>
                <li><strong>mongoose:</strong> ODM para MongoDB</li>
                <li><strong>axios:</strong> Cliente HTTP para hacer peticiones</li>
                <li><strong>cors:</strong> Habilita CORS en aplicaciones Express</li>
                <li><strong>bcrypt:</strong> Hash de contraseñas</li>
                <li><strong>jsonwebtoken:</strong> Generación y verificación de JWT</li>
                <li><strong>morgan:</strong> Logger de peticiones HTTP</li>
                <li><strong>validator:</strong> Validación y sanitización de strings</li>
            </ul>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-link"></i> Recursos adicionales</h2>
            <ul>
                <li><a href="https://nodejs.org/docs/latest/api/" target="_blank">Node.js Official Docs</a> - Documentación oficial</li>
                <li><a href="https://www.npmjs.com/" target="_blank">NPM Registry</a> - Repositorio de paquetes</li>
                <li><a href="https://nodejs.dev/learn" target="_blank">Node.js Learn</a> - Guía de aprendizaje</li>
                <li><a href="https://github.com/goldbergyoni/nodebestpractices" target="_blank">Node.js Best Practices</a> - Mejores prácticas</li>
            </ul>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Wiki Personal 2º DAW</p>
        </div>
    </footer>

    <script src="../js/main.js"></script>
</body>
</html>
